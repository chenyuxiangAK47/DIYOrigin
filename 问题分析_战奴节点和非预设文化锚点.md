# 问题分析：战奴节点和非预设文化锚点

## 🔍 问题1：非预设出身应该跳过文化锚点

### 问题描述
用户反馈：选库塞特基本上默认是库塞特文化，除了个别几个node，应该把文化锚点删掉。

### 当前状态
- `OriginMenuRouter.cs` 第37行已经写了：`return "non_preset_social_origin"; // 直接跳过文化选择`
- 但 `OriginTypeSelectionMenu.cs` 第119行设置的是：`OriginSystemHelper.PendingMenuSwitch = "non_preset_culture_anchor";`

### 冲突
路由逻辑说要跳过，但 OnSelect 设置的是文化锚点，导致实际还是跳转到文化锚点菜单。

### 修复方案
修改 `OriginTypeSelectionMenu.cs` 中的 `NonPresetOriginOnSelect`，将 `PendingMenuSwitch` 改为 `"non_preset_social_origin"`。

---

## 🔍 问题2：战奴逃亡节点的"标记"未实现

### 问题描述
战奴逃亡的菜单描述中提到了很多"标记"，但应用逻辑中没有实现：

**Node2（被抓原因）：**
- "劫掠村子被反杀" → 标记：轻伤
- "伏击商队失手" → 标记：饥饿
- "被人出卖当替罪羊" → 标记：政治债务
- "迷路/受伤被捕奴队捡走" → 标记：轻伤，疲惫

**Node3（逃亡方式）：**
- "奴隶暴动杀出血路" → 标记：被怀疑
- "趁夜潜逃" → 标记：低调行事
- "串联同伴一起跑" → 标记：有追随者

**Node4（带走的东西）：**
- "砍下奴隶主的头，带走好刀" → 标记：拥有象征物
- "混乱中抓走沉甸甸的钱袋" → 标记：短期富有
- "救走几名同伴" → 标记：有依赖者
- "偷走交易凭据/名册" → 标记：拥有证明

**Node5（逃亡方向）：**
- 所有选项 → 标记：在路上

### 当前实现状态
- ✅ 技能、金币、士气、特性（Trait）都已实现
- ❌ 标记（Flag）系统未实现
- ❌ 关系调整未完全实现（如"与商人关系-2"、"与精英氏族关系-1"）

### 需要实现的内容

1. **标记系统**（如果 Bannerlord 支持）：
   - 轻伤、饥饿、疲惫、被怀疑、低调行事、有追随者、拥有象征物、短期富有、有依赖者、拥有证明、在路上、政治债务

2. **关系调整**（需要补充）：
   - Node2 "劫掠村子被反杀" → 与商人关系-2
   - Node2 "被人出卖当替罪羊" → 与精英氏族关系-1

---

## 📋 修复清单

### 修复1：非预设出身跳过文化锚点 ✅
- [x] 修改 `OriginTypeSelectionMenu.cs` 中的 `NonPresetOriginOnSelect`
- [x] 将 `PendingMenuSwitch` 改为 `"non_preset_social_origin"`

### 修复2：战奴逃亡节点标记和关系（待实现）
- [ ] 检查 Bannerlord 是否支持标记（Flag）系统
- [ ] 如果支持，实现标记系统
- [ ] 如果不支持，考虑用其他方式实现（如特性、状态等）
- [ ] 补充关系调整：
  - Node2 "劫掠村子被反杀" → 与商人关系-2
  - Node2 "被人出卖当替罪羊" → 与精英氏族关系-1

---

## 🎯 下一步行动

1. **先修复非预设文化锚点问题**（已完成）
2. **检查日志，确认战奴逃亡节点是否正常工作**
3. **如果标记系统不支持，考虑用其他方式实现或移除标记描述**

























